import { FrontPage2} from "./pages/FrontPage/FrontPage";
import "./App.css";
import { OrderPage } from "./pages/OrderPage/OrderPage";
import React from "react";

function App() {
  const [data, setData] = React.useState("");
  const [status, setStatus] = React.useState("Loading...");
  const [buttonPressed, setButtonPressed] = React.useState(false);

  const fetchData = async () => {
    const response = await fetch('/api');
    const data = await response.json();
    setData(data.RXdata);
    console.log(data.RXdata);
  };

  React.useEffect(() => {
    document.documentElement.requestFullscreen();
    const intervalID = setInterval(fetchData, 1000);
    return () => clearInterval(intervalID);
  }, []);

  React.useEffect(() => {
    switch (data) {
      case "3":
        setButtonPressed(false);
        setStatus(data);
        break;
      case "4":
        setButtonPressed(true);
        setStatus(data);
        break;
      default:
        setStatus("Loading...");
        break;
    }
  }, [data]);

  return (
    <>
      {buttonPressed ? <OrderPage status={status} /> : <FrontPage />}
    </>
  );
}

export default App;
